$(document).ready(function(){function o(o){var t=$(window).scrollTop(),n=!o||"scroll"!==o.type;if(!(i||window.attachEvent&&!window.addEventListener)){if(c.menu<c.window)return void e();if(r=!0,c.menu>c.window){if(0>t)return void(d||(d=!0,m=!1,u.css({position:"fixed",top:"",bottom:""})));if(t+c.window>$(document).height()-1)return void(m||(m=!0,d=!1,u.css({position:"fixed",top:"",bottom:0})));if(t>s){var f=c.footer-parseInt(u.css("margin-bottom"));d?(d=!1,w=u.offset().top-(t-s),w+c.menu+c.footer<t+c.window&&(w=t+c.window-c.menu),u.css({position:"absolute",top:w,bottom:""})):!m&&u.offset().top+c.menu<t+c.window?(m=!0,u.css({position:"fixed",top:"",bottom:f})):m&&parseInt(u.css("bottom"))!==f&&u.css({bottom:f})}else s>t?m?(m=!1,w=u.offset().top+(s-t),w+c.menu>t+c.window&&(w=t),u.css({position:"absolute",top:w,bottom:""})):!d&&u.offset().top>=t-c.footer&&(d=!0,u.css({position:"fixed",top:"",bottom:""})):n&&(d=m=!1,w=t+c.window-c.menu+2*c.footer,0>=w&&e())}s=t}}function t(){c={window:$(window).height(),footer:$("#footer").height(),menu:u.height()}}function e(){!i&&r&&(d=m=r=!1,u.css({position:"",top:"",bottom:""}))}function n(){t(),screen.width<=640?($(document.body).removeClass("sticky-menu"),e()):c.menu>c.window&&c.menu<$("#body").height()?(o(),$(document.body).removeClass("sticky-menu")):($(document.body).addClass("sticky-menu"),e())}var i=/iPhone|iPad|iPod/.test(navigator.userAgent),s=0,d=!1,m=!1,w=0,r=!1,c={},u=$("#menu");!i&&(screen.width>640||screen.height>640)&&$(window).on("resize scroll",n)});